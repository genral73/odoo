<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.component.FollowersMenu" owl="1">
        <div class="o_FollowersMenu">
            <t t-if="storeProps.isFollowing">
                <button class="btn btn-link o_FollowersMenu_unfollowButton"
                        type="button"
                        t-att-disabled="props.isDisabled"
                        t-on-click="_onClickUnfollow"
                        t-on-mouseenter="_onMouseEnterUnfollow"
                        t-on-mouseleave="_onMouseLeaveUnfollow"
                        t-att-class="{
                            'o-following': !state.hasUnfollowHover,
                            'o-unfollow': state.hasUnfollowHover,
                        }"
                >
                    <t t-if="state.hasUnfollowHover">
                        <i class="fa fa-times"/>
                        Unfollow
                    </t>
                    <t t-else="">
                        <i class="fa fa-check"/>
                        Following
                    </t>
                </button>
            </t>
            <t t-else="">
                <button class="btn btn-link o_FollowersMenu_followButton" type="button" t-att-disabled="props.isDisabled" t-on-click="_onClickFollow">
                    Follow
                </button>
            </t>
            <div class="o_FollowersMenu_followers" t-ref="dropdown">
                <button class="btn btn-link o_FollowersMenu_buttonFollowers" type="button" t-att-disabled="props.isDisabled" t-on-click="_onClickFollowersButton">
                    <i class="fa fa-user"/>
                    <span class="o_FollowersMenu_buttonFollowersCount pl-1" t-esc="storeProps.followersAmount"/>
                </button>

                <t t-if="state.hasDropdown">
                    <div class="o_FollowersMenu_dropdown dropdown-menu dropdown-menu-right" role="menu">
                        <!-- ACTIONS -->
                        <a href="#" role="menuitem" class="dropdown-item o_FollowersMenu_addFollowersButton" t-on-click="_onClickAddFollowers">
                            Add Followers
                        </a>
                        <a href="#" role="menuitem" class="dropdown-item o_FollowersMenu_addChannelsButton" t-on-click="_onClickAddChannels">
                            Add Channels
                        </a>
                        <!-- FOLLOWERS LIST -->
                        <t t-if="storeProps.thread.followerLocalIds and storeProps.thread.followerLocalIds.length > 0">
                            <div role="separator" class="dropdown-divider"/>
                            <t t-foreach="storeProps.thread.followerLocalIds" t-as="followerLocalId" t-key="followerLocalId">
                                <Follower
                                    class="o_FollowerMenu_follower dropdown-item"
                                    followerLocalId="followerLocalId"
                                    t-on-click="_onClickFollower"
                                />
                            </t>
                        </t>
                    </div>
                </t>
            </div>
        </div>
    </t>

</templates>
