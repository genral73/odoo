<?xml version="1.0" encoding="utf-8"?>
<templates id="template" xml:space="preserve">

<t t-extend="wysiwyg.widgets.image.existing.attachment">
    <t t-jquery=".o_existing_attachment_cell" t-operation="replace">
        <t t-if="!attachment.isUnsplash">
            <li class="o_existing_attachment_cell position-relative" t-att-data-id="attachment.id">
                <div class="o_image_controls position-absolute w-100 h-100 d-flex flex-column justify-content-between">
                    <div class="w-100 d-flex">
                        <i t-attf-class="fa fa-star fa-lg o_existing_attachment_favorite p-2 #{attachment.is_favorite ? 'active' : ''}" title="Favorite"/>
                        <i t-if="attachment.type === 'binary'" class="fa fa-cog o_existing_attachment_optimize p-2" title="Optimize" role="img" aria-label="Optimize"/>
                        <t t-call="wysiwyg.widgets.file.existing.remove"/>
                    </div>
                    <div class="w-100 text-center">
                        <span class="o_we_attachment_name"><t t-esc="attachment.name"/></span>
                    </div>
                </div>
                <div t-attf-class="d-flex align-items-center h-100 w-100 bg-light">
                    <img class="img img-fluid o_we_attachment_highlight" t-attf-src="#{attachment.thumbnail ? attachment.thumbnail : attachment.url}" t-att-alt="attachment.name" t-att-title="attachment.name"/>
                </div>
            </li>
        </t>
        <t t-else="">
            <li class="o_existing_attachment_cell unsplash_img_container position-relative" t-att-data-id="attachment.id">
                <div t-attf-class="d-flex align-items-center h-100 w-100 bg-light">
                    <img class="img img-fluid o_we_attachment_highlight"
                        t-att-src="attachment.urls.thumbnail"
                        t-att-alt="attachment.alt_description"
                        t-att-title="attachment.alt_description"
                        t-att-data-imgid="attachment.id"
                        t-att-data-url="attachment.urls.hd"
                        t-att-data-download-url="attachment.links.download_location"/>
                    <div class="author_name d-none"><a t-att-href="attachment.user.links.html" target="_blank"><t t-esc="attachment.user.name"/></a></div>
                </div>
            </li>
        </t>
    </t>
</t>

<t t-name="web_unsplash.dialog.image.content">
    <div class="row mt16">
        <div class="col-sm-2 o_unsplash_img_cell text-center" t-as="img" t-foreach="records">
            <div class="o_image o_webimage text-center" t-att-data-imgid="img.id" t-att-data-url="img.urls.regular" t-att-data-download-url="img.links.download_location">
                <img class="img-fluid" t-att-src="img.urls.thumb"/>
            </div>
            <div class="author_name"><a t-att-href="img.user.links.html" target="_blank"><t t-esc="img.user.name"/></a></div>
        </div>
    </div>
    <div class="row mt16" t-if="records.length == 0">
        <div class="m-auto text-muted not-found">
            <i class="fa fa-camera mr8"/> Photos not found
        </div>
    </div>
</t>

<t t-name="web_unsplash.dialog.error.credentials">
    <h4><t t-esc="title"/></h4>
    <div class="details">
        <t t-esc="subtitle"/>
        <div class="form-group mt-4 mb-2 access_key_box">
            <input type="text" class="form-control w-100" id="accessKeyInput" placeholder="Paste your access key here"/>
        </div>
        <a href="https://www.odoo.com/documentation/user/general/unsplash/unsplash_access_key.html" target="_blank"><i class="fa fa-arrow-right"/> Generate an access key</a>
        <div class="form-group mt-4 mb-2 access_key_box">
            <input type="text" class="form-control w-100" id="appIdInput" placeholder="Paste your application ID here"/>
        </div>
        <a href="https://www.odoo.com/documentation/user/general/unsplash/unsplash_application_id.html" target="_blank"><i class="fa fa-arrow-right"/> How to find my Unsplash Application ID?</a>
        <button type="button" class="btn btn-primary btn-block mt-4 save_unsplash">Apply</button>
    </div>
</t>

<t t-name="web_unsplash.dialog.error.content">
    <div class="d-flex mt-2 py-2 border rounded mx-auto col-4 unsplash_error">
        <div class="mx-auto text-center">
            <t t-if="status == 'key_not_found'">
                <t t-call="web_unsplash.dialog.error.credentials">
                    <t t-set="title">
                        Unsplash is not configured
                    </t>
                    <t t-set="subtitle">
                        Search on Unsplash and in your database simultaneously by configuring an Unsplash access key and application ID
                    </t>
                </t>
            </t>
            <t t-elif="status == 403">
                <h4 class="text-muted">
                    Search is temporarily unavailable
                </h4>
                <div class="details">
                    The max number of searches is exceeded. Please retry in an hour or extend to a better account.
                </div>
            </t>
            <t t-elif="status == 401">
                <t t-call="web_unsplash.dialog.error.credentials">
                    <t t-set="title">
                        Unauthorized Key
                    </t>
                    <t t-set="subtitle">
                        Please check your Unsplash access key and application ID.
                    </t>
                </t>
            </t>
            <t t-else="">
                <h4 class="text-muted">
                    Something went wrong
                </h4>
                <div class="details">
                    Please check your internet connection or contact administrator.
                </div>
            </t>
        </div>
    </div>
</t>

</templates>
